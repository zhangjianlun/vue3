{"code":"import { isObject } from '@vue/shared';\r\nimport { reactiveHandlers, readonlyHandlers, shallowReactiveHandlers, shallowReadonlyHandlers } from './baseHandlers';\r\nexport function reactive(target) {\r\n    return createReactObj(target, false, reactiveHandlers);\r\n}\r\nexport function shallowReactive(target) {\r\n    return createReactObj(target, false, shallowReactiveHandlers);\r\n}\r\nexport function readonly(target) {\r\n    return createReactObj(target, true, readonlyHandlers);\r\n}\r\nexport function shallowReadonly(target) {\r\n    return createReactObj(target, true, shallowReadonlyHandlers);\r\n}\r\n// TODO 实现代理\r\nconst reactiveMap = new WeakMap(); //key 必须是对象 自动的垃圾回收\r\nconst readonlyMap = new WeakMap();\r\nfunction createReactObj(target, isReadOnly, baseHandlers) {\r\n    if (!isObject(target)) {\r\n        return target;\r\n    }\r\n    // 优化\r\n    const proxymap = isReadOnly ? readonlyMap : reactiveMap;\r\n    const proxyEs = proxymap.get(target); //有\r\n    if (proxyEs) {\r\n        return proxyEs;\r\n    }\r\n    const proxy = new Proxy(target, baseHandlers);\r\n    proxymap.set(target, proxy); //存放\r\n    return proxy;\r\n}\r\n// 4个方法  (1)是不是只读 (2)是不是深  {list:{}}\r\n// 注意  核心 proxy 源码中  柯里化： 根据不同的参数  proxy(target,{})\r\n// 被代理的数据 优化 不再处理\r\n//# sourceMappingURL=reactive.js.map","references":["/Users/zhangjianlun/zjl_workspace/vue3/packages/shared/src/index.ts","/Users/zhangjianlun/zjl_workspace/vue3/packages/reactivity/src/baseHandlers.ts"],"map":"{\"version\":3,\"file\":\"reactive.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../packages/reactivity/src/reactive.ts\"],\"names\":[],\"mappings\":\"AAAA,OAAO,EAAE,QAAQ,EAAE,MAAM,aAAa,CAAC;AACvC,OAAO,EAAE,gBAAgB,EAAE,gBAAgB,EAAE,uBAAuB,EAAE,uBAAuB,EAAE,MAAM,gBAAgB,CAAC;AAEtH,MAAM,UAAU,QAAQ,CAAC,MAAM;IAC3B,OAAO,cAAc,CAAC,MAAM,EAAE,KAAK,EAAE,gBAAgB,CAAC,CAAC;AAC3D,CAAC;AACD,MAAM,UAAU,eAAe,CAAC,MAAM;IAClC,OAAO,cAAc,CAAC,MAAM,EAAE,KAAK,EAAE,uBAAuB,CAAC,CAAC;AAClE,CAAC;AACD,MAAM,UAAU,QAAQ,CAAC,MAAM;IAC3B,OAAO,cAAc,CAAC,MAAM,EAAE,IAAI,EAAE,gBAAgB,CAAC,CAAC;AAC1D,CAAC;AACD,MAAM,UAAU,eAAe,CAAC,MAAM;IAClC,OAAO,cAAc,CAAC,MAAM,EAAE,IAAI,EAAE,uBAAuB,CAAC,CAAC;AACjE,CAAC;AACD,YAAY;AACZ,MAAM,WAAW,GAAG,IAAI,OAAO,EAAE,CAAC,CAAC,mBAAmB;AACtD,MAAM,WAAW,GAAG,IAAI,OAAO,EAAE,CAAC;AAClC,SAAS,cAAc,CAAC,MAAM,EAAE,UAAU,EAAE,YAAY;IACpD,IAAI,CAAC,QAAQ,CAAC,MAAM,CAAC,EAAE;QACnB,OAAO,MAAM,CAAC;KACjB;IACD,KAAK;IACL,MAAM,QAAQ,GAAG,UAAU,CAAC,CAAC,CAAC,WAAW,CAAC,CAAC,CAAC,WAAW,CAAC;IACxD,MAAM,OAAO,GAAG,QAAQ,CAAC,GAAG,CAAC,MAAM,CAAC,CAAC,CAAC,GAAG;IACzC,IAAI,OAAO,EAAE;QACT,OAAO,OAAO,CAAC;KAClB;IACD,MAAM,KAAK,GAAG,IAAI,KAAK,CAAC,MAAM,EAAE,YAAY,CAAC,CAAC;IAC9C,QAAQ,CAAC,GAAG,CAAC,MAAM,EAAE,KAAK,CAAC,CAAC,CAAC,IAAI;IACjC,OAAO,KAAK,CAAC;AACjB,CAAC;AACD,oCAAoC;AACpC,mDAAmD;AACnD,iBAAiB\"}"}
